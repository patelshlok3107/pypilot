(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{2821:(e,t,s)=>{"use strict";function a(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=t);return a}s.d(t,{$:()=>a})},24768:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(95155),r=s(12115),l=s(97003),n=s(83209),i=s(37621);function c(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[x,p]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[g,y]=(0,r.useState)("");async function j(){try{let[e,s,a]=await Promise.all([(0,i.n)("/tracks"),(0,i.n)("/users/me/entitlements"),(0,i.n)("/trust/transcript/me")]);t(e),c(s),p(a),!o&&e.length>0&&d(e[0].slug)}catch(e){y("Unable to load tracks.")}}(0,r.useEffect)(()=>{j()},[]),(0,r.useEffect)(()=>{!async function(){if(o)try{y(""),f("");let e=await (0,i.n)("/tracks/".concat(o,"/milestones"));u(e)}catch(e){u([]),e instanceof Error&&e.message.toLowerCase().includes("upgrade")&&f("Premium milestone map is locked. Upgrade to unlock full track execution guidance.")}}()},[o]);let b=(0,r.useMemo)(()=>e.find(e=>e.slug===o)||null,[o,e]),w=!!((null==b?void 0:b.premium_only)&&!(null==s?void 0:s.can_access_premium));async function N(e){y(""),f("");try{await (0,i.n)("/tracks/enroll",{method:"POST",body:JSON.stringify({track_slug:e})}),f("Track enrolled successfully."),await j(),d(e)}catch(e){y(e instanceof Error?e.message:"Unable to enroll in track.")}}async function v(e){y(""),f("");try{let t=await (0,i.n)("/tracks/milestones/".concat(e,"/complete"),{method:"POST"});if(f("Milestone completed. +".concat(t.xp_awarded," XP")),o){let e=await (0,i.n)("/tracks/".concat(o,"/milestones"));u(e)}let s=await (0,i.n)("/trust/transcript/me");p(s)}catch(e){y(e instanceof Error?e.message:"Unable to complete milestone.")}}async function _(){if(o){y(""),f("");try{let e=await (0,i.n)("/trust/certificates/generate",{method:"POST",body:JSON.stringify({track_slug:o})});f("Certificate issued: ".concat(e.verification_code))}catch(e){y(e instanceof Error?e.message:"Unable to generate certificate.")}}}return g&&0===e.length?(0,a.jsx)("p",{className:"text-red-300",children:g}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(n.Z,{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Learning Tracks"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:"Follow focused roadmaps with milestones, readiness scores, and completion certificates."}),s&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-brand-200",children:["Plan: ",s.plan_tier," | AI credits today: ",s.ai_credits_remaining]})]}),(0,a.jsxs)("section",{className:"grid gap-4 xl:grid-cols-[1fr_420px]",children:[(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsx)(n.Z,{className:e.slug===o?"border-brand-300/40":"",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:e.name}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:e.description}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-slate-400",children:["Outcome: ",e.outcome]}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-slate-400",children:["Audience: ",e.target_audience]}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-slate-400",children:["Readiness: ",e.readiness_score,"%"]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row",children:[(0,a.jsx)(l.$,{className:"w-full sm:w-auto",variant:"ghost",onClick:()=>d(e.slug),children:"View"}),(0,a.jsx)(l.$,{className:"w-full sm:w-auto",onClick:()=>N(e.slug),disabled:e.enrolled,variant:e.premium_only?"secondary":"primary",children:e.enrolled?"Enrolled":e.premium_only?"Enroll (Premium)":"Enroll"})]})]})},e.slug))}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(n.Z,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Milestones"}),b?(0,a.jsx)("p",{className:"mb-3 mt-1 text-sm text-slate-300",children:b.name}):null,w?(0,a.jsxs)("div",{className:"rounded-xl border border-amber-300/30 bg-amber-500/10 p-3",children:[(0,a.jsx)("p",{className:"text-sm text-amber-50",children:"Premium milestones include readiness checkpoints, scoring standards, and project-grade completion criteria."}),(0,a.jsxs)("div",{className:"mt-2 space-y-1 text-xs text-amber-100",children:[(0,a.jsx)("p",{children:"- Hiring-focused rubric checkpoints"}),(0,a.jsx)("p",{children:"- Architecture review milestones"}),(0,a.jsx)("p",{children:"- Certificate path linked to real execution quality"})]}),(0,a.jsx)(l.$,{className:"mt-3",variant:"secondary",onClick:()=>window.location.assign("/settings"),children:"Unlock Premium Track Map"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,a.jsxs)("div",{className:"rounded-xl border border-white/10 bg-slate-950/70 p-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)("p",{className:"font-medium break-words",children:e.title}),(0,a.jsxs)("span",{className:"text-xs text-brand-200",children:["+",e.reward_xp," XP"]})]}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-300",children:e.description}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-slate-400",children:["Requires ",e.required_lessons," lessons, ",e.required_avg_quiz_score,"% avg quiz,"," ",e.required_challenges_passed," challenge passes."]}),(0,a.jsx)("div",{className:"mt-2 flex gap-2",children:(0,a.jsx)(l.$,{className:"w-full px-3 py-1 text-xs sm:w-auto",disabled:e.completed,onClick:()=>v(e.id),children:e.completed?"Completed":"Claim Milestone"})})]},e.id))}),(0,a.jsx)(l.$,{className:"mt-3 w-full sm:w-auto",variant:"secondary",onClick:_,disabled:!o,children:"Generate Certificate"})]})]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Transcript Snapshot"}),x?(0,a.jsxs)("div",{className:"mt-2 space-y-1 text-sm text-slate-200",children:[(0,a.jsxs)("p",{children:["Total lessons completed: ",x.total_lessons_completed]}),(0,a.jsxs)("p",{children:["Average quiz score: ",x.average_quiz_score,"%"]}),(0,a.jsxs)("p",{children:["Challenges passed: ",x.challenges_passed]}),(0,a.jsxs)("p",{children:["Current level: ",x.current_level]}),(0,a.jsxs)("p",{children:["Total XP: ",x.total_xp]}),(0,a.jsxs)("p",{children:["Tracks: ",x.enrolled_tracks.join(", ")||"None yet"]})]}):(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-300",children:"No transcript yet."})]})]})]}),h&&(0,a.jsx)("p",{className:"text-sm text-brand-200",children:h}),g&&(0,a.jsx)("p",{className:"text-sm text-red-300",children:g})]})}},37621:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var a,r=s(68209);let l=null==(a=s(95704).env.NEXT_PUBLIC_API_URL)?void 0:a.trim(),n=l&&l.length>0?l:"/api",i="/api";async function c(e){if((e.headers.get("content-type")||"").includes("application/json")){let t=await e.json().catch(()=>null);if(t&&"string"==typeof t.detail)return t.detail;if(t&&Array.isArray(t.detail))return t.detail.map(e=>null==e?void 0:e.msg).filter(Boolean).join(", ")}return await e.text()||"Request failed with status ".concat(e.status)}async function o(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],l=new Headers(s.headers||{}),o=void 0!==s.body,d="undefined"!=typeof FormData&&s.body instanceof FormData;if(!o||d||l.has("Content-Type")||l.set("Content-Type","application/json"),a){let e=(0,r.gf)();e&&l.set("Authorization","Bearer ".concat(e))}let m=e.startsWith("/")?e:"/".concat(e);async function u(e){return fetch("".concat(e).concat(m),{...s,headers:l,credentials:"include"})}try{t=await u(n)}catch(e){if(n!==i)t=await u(i);else throw e}if(!t.ok)throw Error(await c(t));return t.json()}},68209:(e,t,s)=>{"use strict";s.d(t,{TV:()=>r,Ti:()=>n,gf:()=>l});let a="pypilot_user";function r(e){localStorage.removeItem("pypilot_access_token"),localStorage.setItem(a,JSON.stringify(e))}function l(){return null}function n(){let e=localStorage.getItem(a);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}},83209:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(95155),r=s(2821);function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.$)("rounded-2xl border border-white/10 bg-slate-950/70 p-4 shadow-[0_10px_25px_rgba(2,6,23,0.35)]",t),...s})}},88161:(e,t,s)=>{Promise.resolve().then(s.bind(s,24768))},97003:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var a=s(95155),r=s(2821);function l(e){let{children:t,className:s,variant:l="primary",...n}=e;return(0,a.jsx)("button",{className:(0,r.$)("inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-semibold transition duration-150","disabled:cursor-not-allowed disabled:opacity-60","primary"===l&&"bg-gradient-to-r from-python-blue to-python-blueLight text-white hover:brightness-110","secondary"===l&&"bg-gradient-to-r from-python-yellow to-amber-300 text-slate-950 hover:brightness-105","ghost"===l&&"border border-white/20 bg-transparent text-white hover:bg-white/10",s),...n,children:t})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=88161)),_N_E=e.O()}]);