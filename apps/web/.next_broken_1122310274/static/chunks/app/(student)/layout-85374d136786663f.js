(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{6613:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},11284:(e,t,a)=>{"use strict";a.d(t,{V:()=>i,p:()=>o});var s=a(95155),r=a(12115),n=a(37621);let l=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)({xp:0,level:1,streakDays:0,completedChapters:[],dailyXp:0,weeklyXp:0,totalLessons:0,completedLessons:0,canAccessAdvancedTopics:!1,earnedAdvancedAccess:!1,advancedUnlockXpRequired:1800,advancedUnlockLessonsRequired:12}),o=(0,r.useCallback)(function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.level,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];{let n=new CustomEvent("xpGained",{detail:{amount:e,source:t,newXp:a.xp+e,newLevel:s,leveledUp:r}});window.dispatchEvent(n)}},[a.level,a.xp]),d=(0,r.useCallback)(async()=>{try{let e=await (0,n.n)("/users/me/dashboard");i({xp:e.xp,level:e.level,streakDays:e.streak_days,completedChapters:e.completed_lesson_ids.map(e=>e.toString()),dailyXp:e.daily_xp,weeklyXp:e.weekly_xp,totalLessons:e.total_lessons,completedLessons:e.completed_lessons,canAccessAdvancedTopics:e.can_access_advanced_topics,earnedAdvancedAccess:e.earned_advanced_access,advancedUnlockXpRequired:e.advanced_unlock_xp_required,advancedUnlockLessonsRequired:e.advanced_unlock_lessons_required})}catch(e){console.error("Failed to load progress:",e)}},[]);(0,r.useEffect)(()=>{d()},[d]);let c=(0,r.useCallback)(async(e,t)=>{o(e,t),await d()},[o,d]),h=(0,r.useCallback)(async(e,t)=>{if(a.completedChapters.includes(e))return;let s=Number(e);if(!Number.isInteger(s)||s<=0)return void console.error("Invalid lesson id for chapter completion: ".concat(e));try{var r,l,i,c;let e=await (0,n.n)("/progress/lessons/".concat(s,"/complete"),{method:"POST",body:JSON.stringify({quiz_score:null!=(r=null==t?void 0:t.quizScore)?r:100,challenge_passed:null==(l=null==t?void 0:t.challengePassed)||l,attempt_id:null!=(i=null==t?void 0:t.attemptId)?i:null,dwell_seconds:null!=(c=null==t?void 0:t.dwellSeconds)?c:0})});e.xp_awarded>0&&o(e.xp_awarded,"Completed lesson ".concat(s),e.level,e.level>a.level),await d()}catch(e){console.error("Failed to complete chapter:",e)}},[o,a.completedChapters,a.level,d]),u=(0,r.useCallback)(async()=>{await d()},[d]);return(0,s.jsx)(l.Provider,{value:{progress:a,addXP:c,completeChapter:h,updateStreak:u,refreshProgress:d},children:t})}function o(){let e=(0,r.useContext)(l);if(!e)throw Error("useProgress must be used within ProgressProvider");return e}},25016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2821),r=a(75889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},28150:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("code-xml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},37621:(e,t,a)=>{"use strict";a.d(t,{n:()=>d});var s,r=a(68209);let n=null==(s=a(95704).env.NEXT_PUBLIC_API_URL)?void 0:s.trim(),l=n&&n.length>0?n:"/api",i="/api";async function o(e){if((e.headers.get("content-type")||"").includes("application/json")){let t=await e.json().catch(()=>null);if(t&&"string"==typeof t.detail)return t.detail;if(t&&Array.isArray(t.detail))return t.detail.map(e=>null==e?void 0:e.msg).filter(Boolean).join(", ")}return await e.text()||"Request failed with status ".concat(e.status)}async function d(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=new Headers(a.headers||{}),d=void 0!==a.body,c="undefined"!=typeof FormData&&a.body instanceof FormData;if(!d||c||n.has("Content-Type")||n.set("Content-Type","application/json"),s){let e=(0,r.gf)();e&&n.set("Authorization","Bearer ".concat(e))}let h=e.startsWith("/")?e:"/".concat(e);async function u(e){return fetch("".concat(e).concat(h),{...a,headers:n,credentials:"include"})}try{t=await u(l)}catch(e){if(l!==i)t=await u(i);else throw e}if(!t.ok)throw Error(await o(t));return t.json()}},46338:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var s=a(95155),r=a(12115),n=a(52619),l=a.n(n),i=a(20063),o=a(26497),d=a(33382),c=a(71847);let h=(0,c.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=a(78519),p=a(47937),x=a(28150),m=a(91169),y=a(50803);let f=(0,c.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),v=(0,c.A)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),b=(0,c.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var g=a(65229),k=a(27937);let w=(0,c.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var j=a(25016);let A=[{name:"Dashboard",icon:h,href:"/dashboard",color:"text-blue-400"},{name:"Subscription",icon:u.A,href:"/subscription",color:"text-amber-400"},{name:"Learn",icon:p.A,href:"/learn",color:"text-green-400"},{name:"Practice",icon:x.A,href:"/practice",color:"text-neutral-400"},{name:"Squad",icon:m.A,href:"/squad",color:"text-purple-400"},{name:"Playground",icon:y.A,href:"/playground",color:"text-orange-400"},{name:"Report",icon:f,href:"/report",color:"text-pink-400"},{name:"AI Tutor",icon:v,href:"/ai-tutor",color:"text-cyan-400"}];function N(){let e=(0,i.usePathname)(),[t,a]=(0,r.useState)(!1),[n,c]=(0,r.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>a(!0),className:"fixed left-4 top-4 z-50 rounded-full bg-glass-200 p-2 text-white backdrop-blur-md md:hidden",children:(0,s.jsx)(b,{size:24})}),(0,s.jsx)(o.N,{children:t&&(0,s.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a(!1),className:"fixed inset-0 z-40 bg-black/60 backdrop-blur-sm md:hidden"})}),(0,s.jsxs)(d.P.aside,{className:(0,j.cn)("fixed inset-y-0 left-0 z-50 flex flex-col border-r border-white/5 bg-[#0a0a0f]/90 backdrop-blur-xl transition-all duration-300 md:translate-x-0",t?"translate-x-0":"-translate-x-full",n?"w-20":"w-64"),children:[(0,s.jsxs)("div",{className:"flex h-20 items-center justify-between px-6",children:[!n&&(0,s.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-python-blue to-python-yellow flex items-center justify-center font-bold text-black",children:"P"}),(0,s.jsx)("span",{className:"text-xl font-bold tracking-tight text-white",children:"PyPilot"})]}),n&&(0,s.jsx)("div",{className:"mx-auto h-8 w-8 rounded-lg bg-gradient-to-br from-python-blue to-python-yellow flex items-center justify-center font-bold text-black",children:"P"}),(0,s.jsx)("button",{onClick:()=>a(!1),className:"md:hidden text-white/70 hover:text-white",children:(0,s.jsx)(g.A,{size:24})})]}),(0,s.jsx)("nav",{className:"flex-1 space-y-2 px-3 py-6",children:A.map(t=>{let r=e.startsWith(t.href);return(0,s.jsxs)(l(),{href:t.href,onClick:()=>a(!1),className:(0,j.cn)("group relative flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200",r?"bg-white/10 text-white shadow-glow":"text-slate-400 hover:bg-white/5 hover:text-white"),children:[(0,s.jsx)(t.icon,{size:20,className:(0,j.cn)("transition-colors",r?t.color:"group-hover:text-white")}),!n&&(0,s.jsx)("span",{children:t.name}),r&&!n&&(0,s.jsx)(d.P.div,{layoutId:"activeTab",className:"absolute left-0 h-8 w-1 rounded-r-full bg-python-blue"})]},t.href)})}),(0,s.jsx)("div",{className:"hidden border-t border-white/5 p-4 md:block",children:(0,s.jsx)("button",{onClick:()=>c(!n),className:"flex w-full items-center justify-center rounded-lg py-2 text-slate-500 hover:bg-white/5 hover:text-white",children:n?(0,s.jsx)(k.A,{size:20}):(0,s.jsx)("span",{className:"text-xs uppercase tracking-wider",children:"Collapse"})})}),(0,s.jsx)("div",{className:"border-t border-white/5 p-4",children:(0,s.jsxs)("button",{className:(0,j.cn)("flex w-full items-center gap-3 rounded-xl p-2 transition-colors hover:bg-red-500/10 hover:text-red-400",n?"justify-center":""),children:[(0,s.jsx)(w,{size:20,className:"text-slate-400 group-hover:text-red-400"}),!n&&(0,s.jsx)("span",{className:"text-sm font-medium text-slate-400",children:"Sign Out"})]})})]})]})}function _(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex min-h-screen bg-[#030712] text-white",children:[(0,s.jsx)(N,{}),(0,s.jsx)("main",{className:"flex-1 transition-all duration-300 md:ml-64",children:(0,s.jsx)("div",{className:"container mx-auto p-4 md:p-8 pt-20 md:pt-8 min-h-screen",children:t})})]})}var M=a(11284),C=a(6613),z=a(56154);function P(){let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=e=>{let{amount:a,source:s,newLevel:r,leveledUp:n}=e.detail,l={id:Date.now(),amount:a,source:s,leveledUp:n,newLevel:r};t(e=>[...e,l]),setTimeout(()=>{t(e=>e.filter(e=>e.id!==l.id))},3e3)};return window.addEventListener("xpGained",e),()=>window.removeEventListener("xpGained",e)},[]),(0,s.jsx)("div",{className:"fixed top-20 right-6 z-50 space-y-2",children:(0,s.jsx)(o.N,{children:e.map(e=>(0,s.jsx)(d.P.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:"rounded-xl border border-green-500/50 bg-green-500/10 backdrop-blur-md p-4 shadow-lg min-w-[250px]",children:e.leveledUp?(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"rounded-full bg-yellow-500 p-2",children:(0,s.jsx)(C.A,{className:"text-white",size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-yellow-400",children:"Level Up!"}),(0,s.jsxs)("p",{className:"text-sm text-white",children:["You're now Level ",e.newLevel]})]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"rounded-full bg-green-500 p-2",children:(0,s.jsx)(z.A,{className:"text-white",size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-bold text-green-400",children:["+",e.amount," XP"]}),(0,s.jsx)("p",{className:"text-xs text-slate-300",children:e.source})]})]})},e.id))})})}var S=a(37621),q=a(68209);function L(e){let{children:t}=e,a=(0,i.useRouter)(),n=(0,i.usePathname)(),[l,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null);return((0,r.useEffect)(()=>{!async function(){let e=(0,q.Ti)();try{let e=await (0,S.n)("/auth/session",{method:"GET"},!1);(0,q.TV)(e),c(e);let t=await (0,S.n)("/onboarding/status"),s="/onboarding"===n;if(!t.onboarding_complete&&!s)return void a.replace("/onboarding");if(t.onboarding_complete&&s)return void a.replace("/dashboard")}catch(t){if(!e)return void a.replace("/login?next=".concat(encodeURIComponent(n||"/dashboard")));c(e)}o(!1)}()},[n,a]),l||!d)?(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-slate-950 text-slate-200",children:"Loading workspace..."}):(0,s.jsx)(s.Fragment,{children:t})}function E(e){let{children:t}=e;return(0,s.jsxs)(M.V,{children:[(0,s.jsx)(P,{}),(0,s.jsx)(L,{children:(0,s.jsx)(_,{children:t})})]})}},47937:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},50803:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]])},54550:(e,t,a)=>{Promise.resolve().then(a.bind(a,46338))},56154:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},68209:(e,t,a)=>{"use strict";a.d(t,{TV:()=>r,Ti:()=>l,gf:()=>n});let s="pypilot_user";function r(e){localStorage.removeItem("pypilot_access_token"),localStorage.setItem(s,JSON.stringify(e))}function n(){return null}function l(){let e=localStorage.getItem(s);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}},78519:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},91169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[164,619,86,441,255,358],()=>e(e.s=54550)),_N_E=e.O()}]);