(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{2821:(e,t,s)=>{"use strict";function a(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(a=e(t[s]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}(e))&&(a&&(a+=" "),a+=t);return a}s.d(t,{$:()=>a})},3598:(e,t,s)=>{Promise.resolve().then(s.bind(s,76044))},37621:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var a,n=s(68209);let l=null==(a=s(95704).env.NEXT_PUBLIC_API_URL)?void 0:a.trim(),r=l&&l.length>0?l:"/api",i="/api";async function c(e){if((e.headers.get("content-type")||"").includes("application/json")){let t=await e.json().catch(()=>null);if(t&&"string"==typeof t.detail)return t.detail;if(t&&Array.isArray(t.detail))return t.detail.map(e=>null==e?void 0:e.msg).filter(Boolean).join(", ")}return await e.text()||"Request failed with status ".concat(e.status)}async function o(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],l=new Headers(s.headers||{}),o=void 0!==s.body,d="undefined"!=typeof FormData&&s.body instanceof FormData;if(!o||d||l.has("Content-Type")||l.set("Content-Type","application/json"),a){let e=(0,n.gf)();e&&l.set("Authorization","Bearer ".concat(e))}let x=e.startsWith("/")?e:"/".concat(e);async function h(e){return fetch("".concat(e).concat(x),{...s,headers:l,credentials:"include"})}try{t=await h(r)}catch(e){if(r!==i)t=await h(i);else throw e}if(!t.ok)throw Error(await c(t));return t.json()}},68209:(e,t,s)=>{"use strict";s.d(t,{TV:()=>n,Ti:()=>r,gf:()=>l});let a="pypilot_user";function n(e){localStorage.removeItem("pypilot_access_token"),localStorage.setItem(a,JSON.stringify(e))}function l(){return null}function r(){let e=localStorage.getItem(a);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}},76044:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(95155),n=s(12115),l=s(83209),r=s(37621);function i(){let[e,t]=(0,n.useState)(null),[s,i]=(0,n.useState)([]),[c,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{!async function(){try{let[e,s]=await Promise.all([(0,r.n)("/admin/analytics"),(0,r.n)("/admin/subscriptions")]);t(e),i(s)}catch(e){o(!0)}}()},[]),c)?(0,a.jsx)(l.Z,{children:(0,a.jsx)("p",{className:"text-sm text-amber-300",children:"Admin access required for this section."})}):e?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Admin Panel"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:"Platform analytics, course controls, and subscriptions."})]}),(0,a.jsxs)("section",{className:"grid gap-4 md:grid-cols-5",children:[(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Users"}),(0,a.jsx)("p",{className:"text-2xl font-semibold",children:e.total_users})]}),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Paid"}),(0,a.jsx)("p",{className:"text-2xl font-semibold",children:e.paid_users})]}),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Active (7d)"}),(0,a.jsx)("p",{className:"text-2xl font-semibold",children:e.active_users_last_7_days})]}),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Submissions"}),(0,a.jsx)("p",{className:"text-2xl font-semibold",children:e.total_submissions})]}),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Avg Completion"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold",children:[e.average_completion_rate,"%"]})]})]}),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("h2",{className:"mb-3 text-lg font-semibold",children:"Subscription Tracking"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"text-slate-300",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2",children:"Email"}),(0,a.jsx)("th",{className:"p-2",children:"Plan"}),(0,a.jsx)("th",{className:"p-2",children:"Status"}),(0,a.jsx)("th",{className:"p-2",children:"Period End"})]})}),(0,a.jsx)("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"border-t border-white/10",children:[(0,a.jsx)("td",{className:"p-2",children:e.email}),(0,a.jsx)("td",{className:"p-2",children:e.plan}),(0,a.jsx)("td",{className:"p-2",children:e.status}),(0,a.jsx)("td",{className:"p-2",children:e.current_period_end||"-"})]},"".concat(e.user_id,"-").concat(e.current_period_end||"none")))})]})})]})]}):(0,a.jsx)("p",{className:"text-slate-300",children:"Loading admin panel..."})}},83209:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(95155),n=s(2821);function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.$)("rounded-2xl border border-white/10 bg-slate-950/70 p-4 shadow-[0_10px_25px_rgba(2,6,23,0.35)]",t),...s})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=3598)),_N_E=e.O()}]);