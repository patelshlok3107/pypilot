(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{2821:(e,t,a)=>{"use strict";function r(){for(var e,t,a=0,r="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=function e(t){var a,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(a=0;a<s;a++)t[a]&&(r=e(t[a]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{$:()=>r})},6520:(e,t,a)=>{Promise.resolve().then(a.bind(a,58473))},20063:(e,t,a)=>{"use strict";var r=a(47260);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},37621:(e,t,a)=>{"use strict";a.d(t,{n:()=>c});var r,n=a(68209);let s=null==(r=a(95704).env.NEXT_PUBLIC_API_URL)?void 0:r.trim(),l=s&&s.length>0?s:"/api",i="/api";async function o(e){if((e.headers.get("content-type")||"").includes("application/json")){let t=await e.json().catch(()=>null);if(t&&"string"==typeof t.detail)return t.detail;if(t&&Array.isArray(t.detail))return t.detail.map(e=>null==e?void 0:e.msg).filter(Boolean).join(", ")}return await e.text()||"Request failed with status ".concat(e.status)}async function c(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=new Headers(a.headers||{}),c=void 0!==a.body,d="undefined"!=typeof FormData&&a.body instanceof FormData;if(!c||d||s.has("Content-Type")||s.set("Content-Type","application/json"),r){let e=(0,n.gf)();e&&s.set("Authorization","Bearer ".concat(e))}let u=e.startsWith("/")?e:"/".concat(e);async function m(e){return fetch("".concat(e).concat(u),{...a,headers:s,credentials:"include"})}try{t=await m(l)}catch(e){if(l!==i)t=await m(i);else throw e}if(!t.ok)throw Error(await o(t));return t.json()}},58473:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(95155),n=a(12115),s=a(20063),l=a(97003),i=a(83209),o=a(37621);function c(){let e=(0,s.useRouter)(),[t,a]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)([]),[h,g]=(0,n.useState)({}),[p,b]=(0,n.useState)(""),[x,f]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[j,w]=(0,n.useState)(!1),[N,_]=(0,n.useState)("");(0,n.useEffect)(()=>{!async function(){try{let[e,t,r]=await Promise.all([(0,o.n)("/onboarding/questions"),(0,o.n)("/onboarding/status"),(0,o.n)("/tracks")]);a(e),d(t),m(r),b(t.learning_goal||e.goals[0]||"School/College Python"),f(t.recommended_track_slug||"")}catch(e){_("Unable to load onboarding form.")}}()},[]);let S=(0,n.useMemo)(()=>t?t.questions.map(e=>{var t;return null!=(t=h[e.id])?t:-1}):[],[h,t]);async function k(){if(t){if(!p.trim())return void _("Please choose a learning goal.");if(S.some(e=>e<0))return void _("Please answer all diagnostic questions.");w(!0),_("");try{let t={learning_goal:p,selected_track_slug:x||null,parent_email:y.trim()||null,answers:S},a=await (0,o.n)("/onboarding/complete",{method:"POST",body:JSON.stringify(t)});a.recommended_track_slug&&await (0,o.n)("/tracks/enroll",{method:"POST",body:JSON.stringify({track_slug:a.recommended_track_slug})}).catch(()=>null),e.push("/dashboard")}catch(e){_(e instanceof Error?e.message:"Onboarding submission failed.")}finally{w(!1)}}}return N&&!t?(0,r.jsx)("p",{className:"text-red-300",children:N}):t&&c?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(i.Z,{className:"bg-gradient-to-br from-brand-500/20 via-slate-900/80 to-slate-900/80",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-brand-200",children:"Welcome"}),(0,r.jsx)("h1",{className:"mt-2 text-2xl font-semibold",children:"Set up your Python learning profile"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-slate-200",children:"We will personalize your lessons, AI hints, and milestone roadmap using this quick setup."})]}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)("h2",{className:"mb-3 text-lg font-semibold",children:"Learning Goal"}),(0,r.jsx)("div",{className:"grid gap-2 md:grid-cols-3",children:t.goals.map(e=>(0,r.jsx)("button",{onClick:()=>b(e),className:"rounded-xl border px-3 py-3 text-left text-sm transition ".concat(p===e?"border-brand-300/60 bg-brand-500/20 text-brand-100":"border-white/10 bg-slate-950/60 text-slate-200 hover:bg-white/10"),children:e},e))})]}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)("h2",{className:"mb-3 text-lg font-semibold",children:"Recommended Track (Optional Override)"}),(0,r.jsxs)("select",{value:x,onChange:e=>f(e.target.value),className:"w-full rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2",children:[(0,r.jsx)("option",{value:"",children:"Auto recommend for me"}),u.map(e=>(0,r.jsxs)("option",{value:e.slug,children:[e.name," ",e.premium_only?"(Premium)":"(Free)"]},e.slug))]})]}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)("h2",{className:"mb-3 text-lg font-semibold",children:"Parent Email (Optional)"}),(0,r.jsx)("input",{type:"email",value:y,onChange:e=>v(e.target.value),className:"w-full rounded-xl border border-white/10 bg-slate-950/60 px-3 py-2",placeholder:"parent@example.com"})]}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:"Diagnostic Quiz"}),(0,r.jsx)("div",{className:"space-y-4",children:t.questions.map(e=>(0,r.jsxs)("div",{className:"rounded-xl border border-white/10 bg-slate-950/70 p-3",children:[(0,r.jsxs)("p",{className:"mb-2 text-sm font-medium",children:["Q",e.id,". ",e.prompt]}),(0,r.jsx)("div",{className:"grid gap-2",children:e.options.map((t,a)=>{let n=h[e.id]===a;return(0,r.jsx)("button",{onClick:()=>g(t=>({...t,[e.id]:a})),className:"rounded-lg px-3 py-2 text-left text-sm ".concat(n?"bg-brand-500/20 text-brand-100":"bg-slate-900 text-slate-200 hover:bg-white/10"),children:t},"".concat(e.id,"-").concat(t))})})]},e.id))}),N&&(0,r.jsx)("p",{className:"mt-3 text-sm text-red-300",children:N}),(0,r.jsx)("div",{className:"mt-4 flex gap-2",children:(0,r.jsx)(l.$,{onClick:k,disabled:j,children:j?"Saving profile...":"Finish Onboarding"})})]})]}):(0,r.jsx)("p",{className:"text-slate-300",children:"Loading onboarding..."})}},68209:(e,t,a)=>{"use strict";a.d(t,{TV:()=>n,Ti:()=>l,gf:()=>s});let r="pypilot_user";function n(e){localStorage.removeItem("pypilot_access_token"),localStorage.setItem(r,JSON.stringify(e))}function s(){return null}function l(){let e=localStorage.getItem(r);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}},83209:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(95155),n=a(2821);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.$)("rounded-2xl border border-white/10 bg-slate-950/70 p-4 shadow-[0_10px_25px_rgba(2,6,23,0.35)]",t),...a})}},97003:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});var r=a(95155),n=a(2821);function s(e){let{children:t,className:a,variant:s="primary",...l}=e;return(0,r.jsx)("button",{className:(0,n.$)("inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-semibold transition duration-150","disabled:cursor-not-allowed disabled:opacity-60","primary"===s&&"bg-gradient-to-r from-python-blue to-python-blueLight text-white hover:brightness-110","secondary"===s&&"bg-gradient-to-r from-python-yellow to-amber-300 text-slate-950 hover:brightness-105","ghost"===s&&"border border-white/20 bg-transparent text-white hover:bg-white/10",a),...l,children:t})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=6520)),_N_E=e.O()}]);